<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>testtools NEWS &mdash; testtools VERSION documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'VERSION',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="testtools VERSION documentation" href="index.html" />
    <link rel="next" title="testtools API documentation" href="api.html" />
    <link rel="prev" title="Contributing to testtools" href="hacking.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="api.html" title="testtools API documentation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="hacking.html" title="Contributing to testtools"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">testtools VERSION documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="testtools-news">
<h1>testtools NEWS<a class="headerlink" href="#testtools-news" title="Permalink to this headline">¶</a></h1>
<p>Changes and improvements to <a class="reference external" href="http://pypi.python.org/pypi/testtools">testtools</a>, grouped by release.</p>
<div class="section" id="next">
<h2>NEXT<a class="headerlink" href="#next" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id1">
<h2>1.8.0<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="improvements">
<h3>Improvements<a class="headerlink" href="#improvements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>AsynchronousDeferredRunTest now correctly attaches the test log.
Previously it attached an empty file. (Colin Watson)</li>
</ul>
</div>
</div>
<div class="section" id="id2">
<h2>1.7.1<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3>Improvements<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Building a wheel on Python 3 was missing <code class="docutils literal"><span class="pre">_compat2x.py</span></code> needed for Python2.
This was a side effect of the fix to bug #941958, where we fixed a cosmetic
error. (Robert Collins, #1430534)</li>
<li>During reporting in <code class="docutils literal"><span class="pre">TextTestResult</span></code> now always uses <code class="docutils literal"><span class="pre">ceil</span></code> rather than
depending on the undefined rounding behaviour in string formatting.
(Robert Collins)</li>
</ul>
</div>
</div>
<div class="section" id="id4">
<h2>1.7.0<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id5">
<h3>Improvements<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Empty attachments to tests were triggering a file payload of None in the
<code class="docutils literal"><span class="pre">ExtendedToStreamDecorator</span></code> code, which caused multiple copies of
attachments that had been output prior to the empty one.
(Robert Collins, #1378609)</li>
</ul>
</div>
</div>
<div class="section" id="id6">
<h2>1.6.1<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<div class="section" id="changes">
<h3>Changes<a class="headerlink" href="#changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix installing when <code class="docutils literal"><span class="pre">extras</span></code> is not already installed. Our guards
for the absence of unittest2 were not sufficient.
(Robert Collins, #1430076)</li>
</ul>
</div>
</div>
<div class="section" id="id7">
<h2>1.6.0<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id8">
<h3>Improvements<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">testtools.run</span></code> now accepts <code class="docutils literal"><span class="pre">--locals</span></code> to show local variables
in tracebacks, which can be a significant aid in debugging. In doing
so we&#8217;ve removed the code reimplementing linecache and traceback by
using the new traceback2 and linecache2 packages.
(Robert Collins, github #111)</li>
</ul>
</div>
<div class="section" id="id9">
<h3>Changes<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">testtools</span></code> now depends on <code class="docutils literal"><span class="pre">unittest2</span></code> 1.0.0 which brings in a dependency
on <code class="docutils literal"><span class="pre">traceback2</span></code> and via it <code class="docutils literal"><span class="pre">linecache2</span></code>. (Robert Collins)</li>
</ul>
</div>
</div>
<div class="section" id="id10">
<h2>1.5.0<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id11">
<h3>Improvements<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>When an import error happens <code class="docutils literal"><span class="pre">testtools.run</span></code> will now show the full
error rather than just the name of the module that failed to import.
(Robert Collins)</li>
</ul>
</div>
</div>
<div class="section" id="id12">
<h2>1.4.0<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id13">
<h3>Changes<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">testtools.TestCase</span></code> now inherits from unittest2.TestCase, which
provides a <code class="docutils literal"><span class="pre">setUpClass</span></code> for upcalls on Python 2.6.
(Robert Collins, #1393283)</li>
</ul>
</div>
</div>
<div class="section" id="id14">
<h2>1.3.0<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id15">
<h3>Changes<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed our setup.py to use setup_requires to ensure the import dependencies
for testtools are present before setup.py runs (as setup.py imports testtools
to read out the version number). (Robert Collins)</li>
<li>Support setUpClass skipping with self.skipException. Previously this worked
with unittest from 2.7 and above but was not supported by testtools - it was
a happy accident. Since we now hard depend on unittest2, we need to invert
our exception lookup priorities to support it. Regular skips done through
raise self.skipException will continue to work, since they were always caught
in our code - its because the suite type being used to implement setUpClass
has changed that an issue occured.
(Robert Collins, #1393068)</li>
</ul>
</div>
</div>
<div class="section" id="id16">
<h2>1.2.1<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id17">
<h3>Changes<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Correctly express our unittest2 dependency: we don&#8217;t work with old releases.
(Robert Collins)</li>
</ul>
</div>
</div>
<div class="section" id="id18">
<h2>1.2.0<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id19">
<h3>Changes<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Depends on unittest2 for discovery functionality and the <code class="docutils literal"><span class="pre">TestProgram</span></code> base
class. This brings in many fixes made to discovery where previously we were
only using the discovery package or the version in the release of Python
that the test execution was occuring on. (Robert Collins, #1271133)</li>
<li>Fixed unit tests which were failing under pypy due to a change in the way
pypy formats tracebacks. (Thomi Richards)</li>
<li>Fixed the testtools test suite to run correctly when run via <code class="docutils literal"><span class="pre">unit2</span></code>
or <code class="docutils literal"><span class="pre">testtools.run</span> <span class="pre">discover</span></code>.</li>
<li>Make <cite>testtools.content.text_content</cite> error if anything other than text
is given as content. (Thomi Richards)</li>
<li>We now publish wheels of testtools. (Robert Collins, #issue84)</li>
</ul>
</div>
</div>
<div class="section" id="id20">
<h2>1.1.0<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id21">
<h3>Improvements<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Exceptions in a <code class="docutils literal"><span class="pre">fixture.getDetails</span></code> method will no longer mask errors
raised from the same fixture&#8217;s <code class="docutils literal"><span class="pre">setUp</span></code> method.
(Robert Collins, #1368440)</li>
</ul>
</div>
</div>
<div class="section" id="id22">
<h2>1.0.0<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h2>
<p>Long overdue, we&#8217;ve adopted a backwards compatibility statement and recognized
that we have plenty of users depending on our behaviour - calling our version
1.0.0 is a recognition of that.</p>
<div class="section" id="id23">
<h3>Improvements<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix a long-standing bug where tearDown and cleanUps would not be called if the
test run was interrupted. This should fix leaking external resources from
interrupted tests.
(Robert Collins, #1364188)</li>
<li>Fix a long-standing bug where calling sys.exit(0) from within a test would
cause the test suite to exit with 0, without reporting a failure of that
test. We still allow the test suite to be exited (since catching higher order
exceptions requires exceptional circumstances) but we now call a last-resort
handler on the TestCase, resulting in an error being reported for the test.
(Robert Collins, #1364188)</li>
<li>Fix an issue where tests skipped with the <code class="docutils literal"><span class="pre">skip``*</span> <span class="pre">family</span> <span class="pre">of</span> <span class="pre">decorators</span> <span class="pre">would</span>
<span class="pre">still</span> <span class="pre">have</span> <span class="pre">their</span> <span class="pre">``setUp</span></code> and <code class="docutils literal"><span class="pre">tearDown</span></code> functions called.
(Thomi Richards, #https://github.com/testing-cabal/testtools/issues/86)</li>
<li>We have adopted a formal backwards compatibility statement (see hacking.rst)
(Robert Collins)</li>
</ul>
</div>
</div>
<div class="section" id="id24">
<h2>0.9.39<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h2>
<p>Brown paper bag release - 0.9.38 was broken for some users,
_jython_aware_splitext was not defined entirely compatibly.
(Robert Collins, #https://github.com/testing-cabal/testtools/issues/100)</p>
</div>
<div class="section" id="id25">
<h2>0.9.38<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h2>
<p>Bug fixes for test importing.</p>
<div class="section" id="id26">
<h3>Improvements<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Discovery import error detection wasn&#8217;t implemented for python 2.6 (the
&#8216;discover&#8217; module). (Robert Collins)</li>
<li>Discovery now executes load_tests (if present) in __init__ in all packages.
(Robert Collins, <a class="reference external" href="http://bugs.python.org/issue16662">http://bugs.python.org/issue16662</a>)</li>
</ul>
</div>
</div>
<div class="section" id="id27">
<h2>0.9.37<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h2>
<p>Minor improvements to correctness.</p>
<div class="section" id="id28">
<h3>Changes<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">stdout</span></code> is now correctly honoured on <code class="docutils literal"><span class="pre">run.TestProgram</span></code> - before the
runner objects would be created with no stdout parameter. If construction
fails, the previous parameter list is attempted, permitting compatibility
with Runner classes that don&#8217;t accept stdout as a parameter.
(Robert Collins)</li>
<li>The <code class="docutils literal"><span class="pre">ExtendedToStreamDecorator</span></code> now handles content objects with one less
packet - the last packet of the source content is sent with EOF set rather
than an empty packet with EOF set being sent after the last packet of the
source content. (Robert Collins)</li>
</ul>
</div>
</div>
<div class="section" id="id29">
<h2>0.9.36<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h2>
<p>Welcome to our long overdue 0.9.36 release, which improves compatibility with
Python3.4, adds assert_that, a function for using matchers without TestCase
objects, and finally will error if you try to use setUp or tearDown twice -
since that invariably leads to bad things of one sort or another happening.</p>
<div class="section" id="id30">
<h3>Changes<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Error if <code class="docutils literal"><span class="pre">setUp</span></code> or <code class="docutils literal"><span class="pre">tearDown</span></code> are called twice.
(Robert Collins, #882884)</li>
<li>Make testtools compatible with the <code class="docutils literal"><span class="pre">unittest.expectedFailure</span></code> decorator in
Python 3.4. (Thomi Richards)</li>
</ul>
</div>
<div class="section" id="id31">
<h3>Improvements<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Introduce the assert_that function, which allows matchers to be used
independent of testtools.TestCase. (Daniel Watkins, #1243834)</li>
</ul>
</div>
</div>
<div class="section" id="id32">
<h2>0.9.35<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id33">
<h3>Changes<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Removed a number of code paths where Python 2.4 and Python 2.5 were
explicitly handled. (Daniel Watkins)</li>
</ul>
</div>
<div class="section" id="id34">
<h3>Improvements<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added the <code class="docutils literal"><span class="pre">testtools.TestCase.expectThat</span></code> method, which implements
delayed assertions. (Thomi Richards)</li>
<li>Docs are now built as part of the Travis-CI build, reducing the chance of
Read The Docs being broken accidentally. (Daniel Watkins, #1158773)</li>
</ul>
</div>
</div>
<div class="section" id="id35">
<h2>0.9.34<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id36">
<h3>Improvements<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added ability for <code class="docutils literal"><span class="pre">testtools.TestCase</span></code> instances to force a test to
fail, even if no assertions failed. (Thomi Richards)</li>
<li>Added <code class="docutils literal"><span class="pre">testtools.content.StacktraceContent</span></code>, a content object that
automatically creates a <code class="docutils literal"><span class="pre">StackLinesContent</span></code> object containing the current
stack trace. (Thomi Richards)</li>
<li><code class="docutils literal"><span class="pre">AnyMatch</span></code> is now exported properly in <code class="docutils literal"><span class="pre">testtools.matchers</span></code>.
(Robert Collins, Rob Kennedy, github #44)</li>
<li>In Python 3.3, if there are duplicate test ids, tests.sort() will
fail and raise TypeError. Detect the duplicate test ids firstly in
sorted_tests() to ensure that all test ids are unique.
(Kui Shi, #1243922)</li>
<li><code class="docutils literal"><span class="pre">json_content</span></code> is now in the <code class="docutils literal"><span class="pre">__all__</span></code> attribute for
<code class="docutils literal"><span class="pre">testtools.content</span></code>. (Robert Collins)</li>
<li>Network tests now bind to 127.0.0.1 to avoid (even temporary) network
visible ports. (Benedikt Morbach, github #46)</li>
<li>Test listing now explicitly indicates by printing &#8216;Failed to import&#8217; and
exiting (2) when an import has failed rather than only signalling through the
test name. (Robert Collins, #1245672)</li>
<li><code class="docutils literal"><span class="pre">test_compat.TestDetectEncoding.test_bom</span></code> now works on Python 3.3 - the
corner case with euc_jp is no longer permitted in Python 3.3 so we can
skip it. (Martin [gz], #1251962)</li>
</ul>
</div>
</div>
<div class="section" id="id37">
<h2>0.9.33<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id38">
<h3>Improvements<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added <code class="docutils literal"><span class="pre">addDetailuniqueName</span></code> method to <code class="docutils literal"><span class="pre">testtools.TestCase</span></code> class.
(Thomi Richards)</li>
<li>Removed some unused code from <code class="docutils literal"><span class="pre">testtools.content.TracebackContent</span></code>.
(Thomi Richards)</li>
<li>Added <code class="docutils literal"><span class="pre">testtools.StackLinesContent</span></code>: a content object for displaying
pre-processed stack lines. (Thomi Richards)</li>
<li><code class="docutils literal"><span class="pre">StreamSummary</span></code> was calculating testsRun incorrectly: <code class="docutils literal"><span class="pre">exists</span></code> status
tests were counted as run tests, but they are not.
(Robert Collins, #1203728)</li>
</ul>
</div>
</div>
<div class="section" id="id39">
<h2>0.9.32<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h2>
<p>Regular maintenance release.  Special thanks to new contributor, Xiao Hanyu!</p>
<div class="section" id="id40">
<h3>Changes<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">testttols.compat._format_exc_info</span></code> has been refactored into several
smaller functions. (Thomi Richards)</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id41">
<h3>Improvements<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Stacktrace filtering no longer hides unittest frames that are surrounded by
user frames. We will reenable this when we figure out a better algorithm for
retaining meaning. (Robert Collins, #1188420)</li>
<li>The compatibility code for skipped tests with unittest2 was broken.
(Robert Collins, #1190951)</li>
<li>Various documentation improvements (Clint Byrum, Xiao Hanyu).</li>
</ul>
</div>
</div>
<div class="section" id="id42">
<h2>0.9.31<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id43">
<h3>Improvements<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">ExpectedException</span></code> now accepts a msg parameter for describing an error,
much the same as assertEquals etc. (Robert Collins)</li>
</ul>
</div>
</div>
<div class="section" id="id44">
<h2>0.9.30<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h2>
<p>A new sort of TestResult, the StreamResult has been added, as a prototype for
a revised standard library test result API.  Expect this API to change.
Although we will try to preserve compatibility for early adopters, it is
experimental and we might need to break it if it turns out to be unsuitable.</p>
<div class="section" id="id45">
<h3>Improvements<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">assertRaises</span></code> works properly for exception classes that have custom
metaclasses</li>
<li><code class="docutils literal"><span class="pre">ConcurrentTestSuite</span></code> was silently eating exceptions that propagate from
the test.run(result) method call. Ignoring them is fine in a normal test
runner, but when they happen in a different thread, the thread that called
suite.run() is not in the stack anymore, and the exceptions are lost. We now
create a synthetic test recording any such exception.
(Robert Collins, #1130429)</li>
<li>Fixed SyntaxError raised in <code class="docutils literal"><span class="pre">_compat2x.py</span></code> when installing via Python 3.
(Will Bond, #941958)</li>
<li>New class <code class="docutils literal"><span class="pre">StreamResult</span></code> which defines the API for the new result type.
(Robert Collins)</li>
<li>New support class <code class="docutils literal"><span class="pre">ConcurrentStreamTestSuite</span></code> for convenient construction
and utilisation of <code class="docutils literal"><span class="pre">StreamToQueue</span></code> objects. (Robert Collins)</li>
<li>New support class <code class="docutils literal"><span class="pre">CopyStreamResult</span></code> which forwards events onto multiple
<code class="docutils literal"><span class="pre">StreamResult</span></code> objects (each of which receives all the events).
(Robert Collins)</li>
<li>New support class <code class="docutils literal"><span class="pre">StreamSummary</span></code> which summarises a <code class="docutils literal"><span class="pre">StreamResult</span></code>
stream compatibly with <code class="docutils literal"><span class="pre">TestResult</span></code> code. (Robert Collins)</li>
<li>New support class <code class="docutils literal"><span class="pre">StreamTagger</span></code> which adds or removes tags from
<code class="docutils literal"><span class="pre">StreamResult</span></code> events. (RobertCollins)</li>
<li>New support class <code class="docutils literal"><span class="pre">StreamToDict</span></code> which converts a <code class="docutils literal"><span class="pre">StreamResult</span></code> to a
series of dicts describing a test. Useful for writing trivial stream
analysers. (Robert Collins)</li>
<li>New support class <code class="docutils literal"><span class="pre">TestControl</span></code> which permits cancelling an in-progress
run. (Robert Collins)</li>
<li>New support class <code class="docutils literal"><span class="pre">StreamFailFast</span></code> which calls a <code class="docutils literal"><span class="pre">TestControl</span></code> instance
to abort the test run when a failure is detected. (Robert Collins)</li>
<li>New support class <code class="docutils literal"><span class="pre">ExtendedToStreamDecorator</span></code> which translates both regular
unittest TestResult API calls and the ExtendedTestResult API which testtools
has supported into the StreamResult API. ExtendedToStreamDecorator also
forwards calls made in the StreamResult API, permitting it to be used
anywhere a StreamResult is used. Key TestResult query methods like
wasSuccessful and shouldStop are synchronised with the StreamResult API
calls, but the detailed statistics like the list of errors are not - a
separate consumer will be created to support that.
(Robert Collins)</li>
<li>New support class <code class="docutils literal"><span class="pre">StreamToExtendedDecorator</span></code> which translates
<code class="docutils literal"><span class="pre">StreamResult</span></code> API calls into <code class="docutils literal"><span class="pre">ExtendedTestResult</span></code> (or any older
<code class="docutils literal"><span class="pre">TestResult</span></code>) calls. This permits using un-migrated result objects with
new runners / tests. (Robert Collins)</li>
<li>New support class <code class="docutils literal"><span class="pre">StreamToQueue</span></code> for sending messages to one
<code class="docutils literal"><span class="pre">StreamResult</span></code> from multiple threads. (Robert Collins)</li>
<li>New support class <code class="docutils literal"><span class="pre">TimestampingStreamResult</span></code> which adds a timestamp to
events with no timestamp. (Robert Collins)</li>
<li>New <code class="docutils literal"><span class="pre">TestCase</span></code> decorator <code class="docutils literal"><span class="pre">DecorateTestCaseResult</span></code> that adapts the
<code class="docutils literal"><span class="pre">TestResult</span></code> or <code class="docutils literal"><span class="pre">StreamResult</span></code> a case will be run with, for ensuring that
a particular result object is used even if the runner running the test doesn&#8217;t
know to use it. (Robert Collins)</li>
<li>New test support class <code class="docutils literal"><span class="pre">testtools.testresult.doubles.StreamResult</span></code>, which
captures all the StreamResult events. (Robert Collins)</li>
<li><code class="docutils literal"><span class="pre">PlaceHolder</span></code> can now hold tags, and applies them before, and removes them
after, the test. (Robert Collins)</li>
<li><code class="docutils literal"><span class="pre">PlaceHolder</span></code> can now hold timestamps, and applies them before the test and
then before the outcome. (Robert Collins)</li>
<li><code class="docutils literal"><span class="pre">StreamResultRouter</span></code> added. This is useful for demultiplexing - e.g. for
partitioning analysis of events or sending feedback encapsulated in
StreamResult events back to their source. (Robert Collins)</li>
<li><code class="docutils literal"><span class="pre">testtools.run.TestProgram</span></code> now supports the <code class="docutils literal"><span class="pre">TestRunner</span></code> taking over
responsibility for formatting the output of <code class="docutils literal"><span class="pre">--list-tests</span></code>.
(Robert Collins)</li>
<li>The error message for setUp and tearDown upcall errors was broken on Python
3.4. (Monty Taylor, Robert Collins, #1140688)</li>
<li>The repr of object() on pypy includes the object id, which was breaking a
test that accidentally depended on the CPython repr for object().
(Jonathan Lange)</li>
</ul>
</div>
</div>
<div class="section" id="id46">
<h2>0.9.29<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h2>
<p>A simple bug fix, and better error messages when you don&#8217;t up-call.</p>
<div class="section" id="id47">
<h3>Changes<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">testtools.content_type.ContentType</span></code> incorrectly used &#8216;,&#8217; rather than &#8216;;&#8217;
to separate parameters. (Robert Collins)</li>
</ul>
</div>
<div class="section" id="id48">
<h3>Improvements<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">testtools.compat.unicode_output_stream</span></code> was wrapping a stream encoder
around <code class="docutils literal"><span class="pre">io.StringIO</span></code> and <code class="docutils literal"><span class="pre">io.TextIOWrapper</span></code> objects, which was incorrect.
(Robert Collins)</li>
<li>Report the name of the source file for setUp and tearDown upcall errors.
(Monty Taylor)</li>
</ul>
</div>
</div>
<div class="section" id="id49">
<h2>0.9.28<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h2>
<p>Testtools has moved VCS - <a class="reference external" href="https://github.com/testing-cabal/testtools/">https://github.com/testing-cabal/testtools/</a> is
the new home. Bug tracking is still on Launchpad, and releases are on Pypi.</p>
<p>We made this change to take advantage of the richer ecosystem of tools around
Git, and to lower the barrier for new contributors.</p>
<div class="section" id="id50">
<h3>Improvements<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New <code class="docutils literal"><span class="pre">testtools.testcase.attr</span></code> and <code class="docutils literal"><span class="pre">testtools.testcase.WithAttributes</span></code>
helpers allow marking up test case methods with simple labels. This permits
filtering tests with more granularity than organising them into modules and
test classes. (Robert Collins)</li>
</ul>
</div>
</div>
<div class="section" id="id51">
<h2>0.9.27<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id52">
<h3>Improvements<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New matcher <code class="docutils literal"><span class="pre">HasLength</span></code> for matching the length of a collection.
(Robert Collins)</li>
<li>New matcher <code class="docutils literal"><span class="pre">MatchesPredicateWithParams</span></code> make it still easier to create
ad hoc matchers. (Robert Collins)</li>
<li>We have a simpler release process in future - see doc/hacking.rst.
(Robert Collins)</li>
</ul>
</div>
</div>
<div class="section" id="id53">
<h2>0.9.26<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h2>
<p>Brown paper bag fix: failed to document the need for setup to be able to use
extras. Compounded by pip not supporting setup_requires.</p>
<div class="section" id="id54">
<h3>Changes<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>setup.py now can generate egg_info even if extras is not available.
Also lists extras in setup_requires for easy_install.
(Robert Collins, #1102464)</li>
</ul>
</div>
</div>
<div class="section" id="id55">
<h2>0.9.25<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id56">
<h3>Changes<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">testtools.run</span> <span class="pre">--load-list</span></code> will now preserve any custom suites
(such as <code class="docutils literal"><span class="pre">testtools.FixtureSuite</span></code> or <code class="docutils literal"><span class="pre">testresources.OptimisingTestSuite</span></code>)
rather than flattening them.
(Robert Collins, #827175)</li>
<li>Testtools now depends on extras, a small library split out from it to contain
generally useful non-testing facilities. Since extras has been around for a
couple of testtools releases now, we&#8217;re making this into a hard dependency of
testtools. (Robert Collins)</li>
<li>Testtools now uses setuptools rather than distutils so that we can document
the extras dependency. (Robert Collins)</li>
</ul>
</div>
<div class="section" id="id57">
<h3>Improvements<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Testtools will no longer override test code registered details called
&#8216;traceback&#8217; when reporting caught exceptions from test code.
(Robert Collins, #812793)</li>
</ul>
</div>
</div>
<div class="section" id="id58">
<h2>0.9.24<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id59">
<h3>Changes<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">testtools.run</span> <span class="pre">discover</span></code> will now sort the tests it discovered. This is a
workaround for <a class="reference external" href="http://bugs.python.org/issue16709">http://bugs.python.org/issue16709</a>. Non-standard test suites
are preserved, and their <code class="docutils literal"><span class="pre">sort_tests()</span></code> method called (if they have such an
attribute). <code class="docutils literal"><span class="pre">testtools.testsuite.sorted_tests(suite,</span> <span class="pre">True)</span></code> can be used by
such suites to do a local sort. (Robert Collins, #1091512)</li>
<li><code class="docutils literal"><span class="pre">ThreadsafeForwardingResult</span></code> now defines a stub <code class="docutils literal"><span class="pre">progress</span></code> method, which
fixes <code class="docutils literal"><span class="pre">testr</span> <span class="pre">run</span></code> of streams containing progress markers (by discarding the
progress data). (Robert Collins, #1019165)</li>
</ul>
</div>
</div>
<div class="section" id="id60">
<h2>0.9.23<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id61">
<h3>Changes<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">run.TestToolsTestRunner</span></code> now accepts the verbosity, buffer and failfast
arguments the upstream python TestProgram code wants to give it, making it
possible to support them in a compatible fashion. (Robert Collins)</li>
</ul>
</div>
<div class="section" id="id62">
<h3>Improvements<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">testtools.run</span></code> now supports the <code class="docutils literal"><span class="pre">-f</span></code> or <code class="docutils literal"><span class="pre">--failfast</span></code> parameter.
Previously it was advertised in the help but ignored.
(Robert Collins, #1090582)</li>
<li><code class="docutils literal"><span class="pre">AnyMatch</span></code> added, a new matcher that matches when any item in a collection
matches the given matcher.  (Jonathan Lange)</li>
<li>Spelling corrections to documentation.  (Vincent Ladeuil)</li>
<li><code class="docutils literal"><span class="pre">TestProgram</span></code> now has a sane default for its <code class="docutils literal"><span class="pre">testRunner</span></code> argument.
(Vincent Ladeuil)</li>
<li>The test suite passes on Python 3 again. (Robert Collins)</li>
</ul>
</div>
</div>
<div class="section" id="id63">
<h2>0.9.22<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id64">
<h3>Improvements<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">content_from_file</span></code> and <code class="docutils literal"><span class="pre">content_from_stream</span></code> now accept seek_offset and
seek_whence parameters allowing them to be used to grab less than the full
stream, or to be used with StringIO streams. (Robert Collins, #1088693)</li>
</ul>
</div>
</div>
<div class="section" id="id65">
<h2>0.9.21<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id66">
<h3>Improvements<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">DirContains</span></code> correctly exposed, after being accidentally hidden in the
great matcher re-organization of 0.9.17.  (Jonathan Lange)</li>
</ul>
</div>
</div>
<div class="section" id="id67">
<h2>0.9.20<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h2>
<p>Three new matchers that&#8217;ll rock your world.</p>
<div class="section" id="id68">
<h3>Improvements<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">New, powerful matchers that match items in a dictionary:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">MatchesDict</span></code>, match every key in a dictionary with a key in a
dictionary of matchers.  For when the set of expected keys is equal to the
set of observed keys.</li>
<li><code class="docutils literal"><span class="pre">ContainsDict</span></code>, every key in a dictionary of matchers must be
found in a dictionary, and the values for those keys must match.  For when
the set of expected keys is a subset of the set of observed keys.</li>
<li><code class="docutils literal"><span class="pre">ContainedByDict</span></code>, every key in a dictionary must be found in
a dictionary of matchers.  For when the set of expected keys is a superset
of the set of observed keys.</li>
</ul>
<p>The names are a little confusing, sorry.  We&#8217;re still trying to figure out
how to present the concept in the simplest way possible.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="id69">
<h2>0.9.19<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h2>
<p>How embarrassing!  Three releases in two days.</p>
<p>We&#8217;ve worked out the kinks and have confirmation from our downstreams that
this is all good.  Should be the last release for a little while.  Please
ignore 0.9.18 and 0.9.17.</p>
<div class="section" id="id70">
<h3>Improvements<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Include the matcher tests in the release, allowing the tests to run and
pass from the release tarball.  (Jonathan Lange)</li>
<li>Fix cosmetic test failures in Python 3.3, introduced during release 0.9.17.
(Jonathan Lange)</li>
</ul>
</div>
</div>
<div class="section" id="id71">
<h2>0.9.18<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h2>
<p>Due to an oversight, release 0.9.18 did not contain the new
<code class="docutils literal"><span class="pre">testtools.matchers</span></code> package and was thus completely broken.  This release
corrects that, returning us all to normality.</p>
</div>
<div class="section" id="id72">
<h2>0.9.17<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h2>
<p>This release brings better discover support and Python3.x improvements. There
are still some test failures on Python3.3 but they are cosmetic - the library
is as usable there as on any other Python 3 release.</p>
<div class="section" id="id73">
<h3>Changes<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">testtools.matchers</span></code> package has been split up.  No change to the
public interface.  (Jonathan Lange)</li>
</ul>
</div>
<div class="section" id="id74">
<h3>Improvements<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">testtools.run</span> <span class="pre">discover</span> <span class="pre">.</span> <span class="pre">--list</span></code> now works. (Robert Collins)</li>
<li>Correctly handling of bytes vs text in JSON content type. (Martin [gz])</li>
</ul>
</div>
</div>
<div class="section" id="id75">
<h2>0.9.16<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h2>
<p>Some new matchers and a new content helper for JSON content.</p>
<p>This is the first release of testtools to drop support for Python 2.4 and 2.5.
If you need support for either of those versions, please use testtools 0.9.15.</p>
<div class="section" id="id76">
<h3>Improvements<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New content helper, <code class="docutils literal"><span class="pre">json_content</span></code> (Jonathan Lange)</li>
<li>New matchers:<ul>
<li><code class="docutils literal"><span class="pre">ContainsAll</span></code> for asserting one thing is a subset of another
(Raphaël Badin)</li>
<li><code class="docutils literal"><span class="pre">SameMembers</span></code> for asserting two iterators have the same members.
(Jonathan Lange)</li>
</ul>
</li>
<li>Reraising of exceptions in Python 3 is more reliable. (Martin [gz])</li>
</ul>
</div>
</div>
<div class="section" id="id77">
<h2>0.9.15<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h2>
<p>This is the last release to support Python2.4 and 2.5. It brings in a slew of
improvements to test tagging and concurrency, making running large test suites
with partitioned workers more reliable and easier to reproduce exact test
ordering in a given worker. See our sister project <code class="docutils literal"><span class="pre">testrepository</span></code> for a
test runner that uses these features.</p>
<div class="section" id="id78">
<h3>Changes<a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">PlaceHolder</span></code> and <code class="docutils literal"><span class="pre">ErrorHolder</span></code> now support being given result details.
(Robert Collins)</li>
<li><code class="docutils literal"><span class="pre">ErrorHolder</span></code> is now just a function - all the logic is in <code class="docutils literal"><span class="pre">PlaceHolder</span></code>.
(Robert Collins)</li>
<li><code class="docutils literal"><span class="pre">TestResult</span></code> and all other <code class="docutils literal"><span class="pre">TestResult</span></code>-like objects in testtools
distinguish between global tags and test-local tags, as per the subunit
specification.  (Jonathan Lange)</li>
<li>This is the <strong>last</strong> release of testtools that supports Python 2.4 or 2.5.
These releases are no longer supported by the Python community and do not
receive security updates. If this affects you, you will need to either
stay on this release or perform your own backports.
(Jonathan Lange, Robert Collins)</li>
<li><code class="docutils literal"><span class="pre">ThreadsafeForwardingResult</span></code> now forwards global tags as test-local tags,
making reasoning about the correctness of the multiplexed stream simpler.
This preserves the semantic value (what tags apply to a given test) while
consuming less stream size (as no negative-tag statement is needed).
(Robert Collins, Gary Poster, #986434)</li>
</ul>
</div>
<div class="section" id="id79">
<h3>Improvements<a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>API documentation corrections. (Raphaël Badin)</li>
<li><code class="docutils literal"><span class="pre">ConcurrentTestSuite</span></code> now takes an optional <code class="docutils literal"><span class="pre">wrap_result</span></code> parameter
that can be used to wrap the <code class="docutils literal"><span class="pre">ThreadsafeForwardingResults</span></code> created by
the suite.  (Jonathan Lange)</li>
<li><code class="docutils literal"><span class="pre">Tagger</span></code> added.  It&#8217;s a new <code class="docutils literal"><span class="pre">TestResult</span></code> that tags all tests sent to
it with a particular set of tags.  (Jonathan Lange)</li>
<li><code class="docutils literal"><span class="pre">testresultdecorator</span></code> brought over from subunit.  (Jonathan Lange)</li>
<li>All <code class="docutils literal"><span class="pre">TestResult</span></code> wrappers now correctly forward <code class="docutils literal"><span class="pre">current_tags</span></code> from
their wrapped results, meaning that <code class="docutils literal"><span class="pre">current_tags</span></code> can always be relied
upon to return the currently active tags on a test result.</li>
<li><code class="docutils literal"><span class="pre">TestByTestResult</span></code>, a <code class="docutils literal"><span class="pre">TestResult</span></code> that calls a method once per test,
added.  (Jonathan Lange)</li>
<li><code class="docutils literal"><span class="pre">ThreadsafeForwardingResult</span></code> correctly forwards <code class="docutils literal"><span class="pre">tags()</span></code> calls where
only one of <code class="docutils literal"><span class="pre">new_tags</span></code> or <code class="docutils literal"><span class="pre">gone_tags</span></code> are specified.
(Jonathan Lange, #980263)</li>
<li><code class="docutils literal"><span class="pre">ThreadsafeForwardingResult</span></code> no longer leaks local tags from one test
into all future tests run.  (Jonathan Lange, #985613)</li>
<li><code class="docutils literal"><span class="pre">ThreadsafeForwardingResult</span></code> has many, many more tests.  (Jonathan Lange)</li>
</ul>
</div>
</div>
<div class="section" id="id80">
<h2>0.9.14<a class="headerlink" href="#id80" title="Permalink to this headline">¶</a></h2>
<p>Our sister project, <a class="reference external" href="https://launchpad.net/subunit">subunit</a>, was using a
private API that was deleted in the 0.9.13 release.  This release restores
that API in order to smooth out the upgrade path.</p>
<p>If you don&#8217;t use subunit, then this release won&#8217;t matter very much to you.</p>
</div>
<div class="section" id="id81">
<h2>0.9.13<a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h2>
<p>Plenty of new matchers and quite a few critical bug fixes (especially to do
with stack traces from failed assertions).  A net win for all.</p>
<div class="section" id="id82">
<h3>Changes<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">MatchesAll</span></code> now takes an <code class="docutils literal"><span class="pre">first_only</span></code> keyword argument that changes how
mismatches are displayed.  If you were previously passing matchers to
<code class="docutils literal"><span class="pre">MatchesAll</span></code> with keyword arguments, then this change might affect your
test results.  (Jonathan Lange)</li>
</ul>
</div>
<div class="section" id="id83">
<h3>Improvements<a class="headerlink" href="#id83" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Actually hide all of the testtools stack for assertion failures. The
previous release promised clean stack, but now we actually provide it.
(Jonathan Lange, #854769)</li>
<li><code class="docutils literal"><span class="pre">assertRaises</span></code> now includes the <code class="docutils literal"><span class="pre">repr</span></code> of the callable that failed to raise
properly. (Jonathan Lange, #881052)</li>
<li>Asynchronous tests no longer hang when run with trial.
(Jonathan Lange, #926189)</li>
<li><code class="docutils literal"><span class="pre">Content</span></code> objects now have an <code class="docutils literal"><span class="pre">as_text</span></code> method to convert their contents
to Unicode text.  (Jonathan Lange)</li>
<li>Failed equality assertions now line up. (Jonathan Lange, #879339)</li>
<li><code class="docutils literal"><span class="pre">FullStackRunTest</span></code> no longer aborts the test run if a test raises an
error.  (Jonathan Lange)</li>
<li><code class="docutils literal"><span class="pre">MatchesAll</span></code> and <code class="docutils literal"><span class="pre">MatchesListwise</span></code> both take a <code class="docutils literal"><span class="pre">first_only</span></code> keyword
argument.  If True, they will report only on the first mismatch they find,
and not continue looking for other possible mismatches.
(Jonathan Lange)</li>
<li>New helper, <code class="docutils literal"><span class="pre">Nullary</span></code> that turns callables with arguments into ones that
don&#8217;t take arguments.  (Jonathan Lange)</li>
<li>New matchers:<ul>
<li><code class="docutils literal"><span class="pre">DirContains</span></code> matches the contents of a directory.
(Jonathan Lange, James Westby)</li>
<li><code class="docutils literal"><span class="pre">DirExists</span></code> matches if a directory exists.
(Jonathan Lange, James Westby)</li>
<li><code class="docutils literal"><span class="pre">FileContains</span></code> matches the contents of a file.
(Jonathan Lange, James Westby)</li>
<li><code class="docutils literal"><span class="pre">FileExists</span></code> matches if a file exists.
(Jonathan Lange, James Westby)</li>
<li><code class="docutils literal"><span class="pre">HasPermissions</span></code> matches the permissions of a file.  (Jonathan Lange)</li>
<li><code class="docutils literal"><span class="pre">MatchesPredicate</span></code> matches if a predicate is true.  (Jonathan Lange)</li>
<li><code class="docutils literal"><span class="pre">PathExists</span></code> matches if a path exists.  (Jonathan Lange, James Westby)</li>
<li><code class="docutils literal"><span class="pre">SamePath</span></code> matches if two paths are the same.  (Jonathan Lange)</li>
<li><code class="docutils literal"><span class="pre">TarballContains</span></code> matches the contents of a tarball.  (Jonathan Lange)</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">MultiTestResult</span></code> supports the <code class="docutils literal"><span class="pre">tags</span></code> method.
(Graham Binns, Francesco Banconi, #914279)</li>
<li><code class="docutils literal"><span class="pre">ThreadsafeForwardingResult</span></code> supports the <code class="docutils literal"><span class="pre">tags</span></code> method.
(Graham Binns, Francesco Banconi, #914279)</li>
<li><code class="docutils literal"><span class="pre">ThreadsafeForwardingResult</span></code> no longer includes semaphore acquisition time
in the test duration (for implicitly timed test runs).
(Robert Collins, #914362)</li>
</ul>
</div>
</div>
<div class="section" id="id84">
<h2>0.9.12<a class="headerlink" href="#id84" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>This is a very big release.  We&#8217;ve made huge improvements on three fronts:</dt>
<dd><ol class="first last arabic simple">
<li>Test failures are way nicer and easier to read</li>
<li>Matchers and <code class="docutils literal"><span class="pre">assertThat</span></code> are much more convenient to use</li>
<li>Correct handling of extended unicode characters</li>
</ol>
</dd>
</dl>
<p>We&#8217;ve trimmed off the fat from the stack trace you get when tests fail, we&#8217;ve
cut out the bits of error messages that just didn&#8217;t help, we&#8217;ve made it easier
to annotate mismatch failures, to compare complex objects and to match raised
exceptions.</p>
<p>Testing code was never this fun.</p>
<div class="section" id="id85">
<h3>Changes<a class="headerlink" href="#id85" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">AfterPreproccessing</span></code> renamed to <code class="docutils literal"><span class="pre">AfterPreprocessing</span></code>, which is a more
correct spelling.  Old name preserved for backwards compatibility, but is
now deprecated.  Please stop using it.
(Jonathan Lange, #813460)</li>
<li><code class="docutils literal"><span class="pre">assertThat</span></code> raises <code class="docutils literal"><span class="pre">MismatchError</span></code> instead of
<code class="docutils literal"><span class="pre">TestCase.failureException</span></code>.  <code class="docutils literal"><span class="pre">MismatchError</span></code> is a subclass of
<code class="docutils literal"><span class="pre">AssertionError</span></code>, so in most cases this change will not matter. However,
if <code class="docutils literal"><span class="pre">self.failureException</span></code> has been set to a non-default value, then
mismatches will become test errors rather than test failures.</li>
<li><code class="docutils literal"><span class="pre">gather_details</span></code> takes two dicts, rather than two detailed objects.
(Jonathan Lange, #801027)</li>
<li><code class="docutils literal"><span class="pre">MatchesRegex</span></code> mismatch now says &#8220;&lt;value&gt; does not match /&lt;regex&gt;/&#8221; rather
than &#8220;&lt;regex&gt; did not match &lt;value&gt;&#8221;. The regular expression contains fewer
backslashes too. (Jonathan Lange, #818079)</li>
<li>Tests that run with <code class="docutils literal"><span class="pre">AsynchronousDeferredRunTest</span></code> now have the <code class="docutils literal"><span class="pre">reactor</span></code>
attribute set to the running reactor. (Jonathan Lange, #720749)</li>
</ul>
</div>
<div class="section" id="id86">
<h3>Improvements<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>All public matchers are now in <code class="docutils literal"><span class="pre">testtools.matchers.__all__</span></code>.
(Jonathan Lange, #784859)</li>
<li><code class="docutils literal"><span class="pre">assertThat</span></code> can actually display mismatches and matchers that contain
extended unicode characters. (Jonathan Lange, Martin [gz], #804127)</li>
<li><code class="docutils literal"><span class="pre">assertThat</span></code> output is much less verbose, displaying only what the mismatch
tells us to display. Old-style verbose output can be had by passing
<code class="docutils literal"><span class="pre">verbose=True</span></code> to assertThat. (Jonathan Lange, #675323, #593190)</li>
<li><code class="docutils literal"><span class="pre">assertThat</span></code> accepts a message which will be used to annotate the matcher.
This can be given as a third parameter or as a keyword parameter.
(Robert Collins)</li>
<li>Automated the Launchpad part of the release process.
(Jonathan Lange, #623486)</li>
<li>Correctly display non-ASCII unicode output on terminals that claim to have a
unicode encoding. (Martin [gz], #804122)</li>
<li><code class="docutils literal"><span class="pre">DocTestMatches</span></code> correctly handles unicode output from examples, rather
than raising an error. (Martin [gz], #764170)</li>
<li><code class="docutils literal"><span class="pre">ErrorHolder</span></code> and <code class="docutils literal"><span class="pre">PlaceHolder</span></code> added to docs. (Jonathan Lange, #816597)</li>
<li><code class="docutils literal"><span class="pre">ExpectedException</span></code> now matches any exception of the given type by
default, and also allows specifying a <code class="docutils literal"><span class="pre">Matcher</span></code> rather than a mere regular
expression. (Jonathan Lange, #791889)</li>
<li><code class="docutils literal"><span class="pre">FixtureSuite</span></code> added, allows test suites to run with a given fixture.
(Jonathan Lange)</li>
<li>Hide testtools&#8217;s own stack frames when displaying tracebacks, making it
easier for test authors to focus on their errors.
(Jonathan Lange, Martin [gz], #788974)</li>
<li>Less boilerplate displayed in test failures and errors.
(Jonathan Lange, #660852)</li>
<li><code class="docutils literal"><span class="pre">MatchesException</span></code> now allows you to match exceptions against any matcher,
rather than just regular expressions.  (Jonathan Lange, #791889)</li>
<li><code class="docutils literal"><span class="pre">MatchesException</span></code> now permits a tuple of types rather than a single type
(when using the type matching mode).  (Robert Collins)</li>
<li><code class="docutils literal"><span class="pre">MatchesStructure.byEquality</span></code> added to make the common case of matching
many attributes by equality much easier.  <code class="docutils literal"><span class="pre">MatchesStructure.byMatcher</span></code>
added in case folk want to match by things other than equality.
(Jonathan Lange)</li>
<li>New convenience assertions, <code class="docutils literal"><span class="pre">assertIsNone</span></code> and <code class="docutils literal"><span class="pre">assertIsNotNone</span></code>.
(Christian Kampka)</li>
<li>New matchers:<ul>
<li><code class="docutils literal"><span class="pre">AllMatch</span></code> matches many values against a single matcher.
(Jonathan Lange, #615108)</li>
<li><code class="docutils literal"><span class="pre">Contains</span></code>. (Robert Collins)</li>
<li><code class="docutils literal"><span class="pre">GreaterThan</span></code>. (Christian Kampka)</li>
</ul>
</li>
<li>New helper, <code class="docutils literal"><span class="pre">safe_hasattr</span></code> added. (Jonathan Lange)</li>
<li><code class="docutils literal"><span class="pre">reraise</span></code> added to <code class="docutils literal"><span class="pre">testtools.compat</span></code>. (Jonathan Lange)</li>
</ul>
</div>
</div>
<div class="section" id="id87">
<h2>0.9.11<a class="headerlink" href="#id87" title="Permalink to this headline">¶</a></h2>
<p>This release brings consistent use of super for better compatibility with
multiple inheritance, fixed Python3 support, improvements in fixture and mather
outputs and a compat helper for testing libraries that deal with bytestrings.</p>
<div class="section" id="id88">
<h3>Changes<a class="headerlink" href="#id88" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">TestCase</span></code> now uses super to call base <code class="docutils literal"><span class="pre">unittest.TestCase</span></code> constructor,
<code class="docutils literal"><span class="pre">setUp</span></code> and <code class="docutils literal"><span class="pre">tearDown</span></code>. (Tim Cole, #771508)</li>
<li>If, when calling <code class="docutils literal"><span class="pre">useFixture</span></code> an error occurs during fixture set up, we
still attempt to gather details from the fixture. (Gavin Panella)</li>
</ul>
</div>
<div class="section" id="id89">
<h3>Improvements<a class="headerlink" href="#id89" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Additional compat helper for <code class="docutils literal"><span class="pre">BytesIO</span></code> for libraries that build on
testtools and are working on Python 3 porting. (Robert Collins)</li>
<li>Corrected documentation for <code class="docutils literal"><span class="pre">MatchesStructure</span></code> in the test authors
document.  (Jonathan Lange)</li>
<li><code class="docutils literal"><span class="pre">LessThan</span></code> error message now says something that is logically correct.
(Gavin Panella, #762008)</li>
<li>Multiple details from a single fixture are now kept separate, rather than
being mooshed together. (Gavin Panella, #788182)</li>
<li>Python 3 support now back in action. (Martin [gz], #688729)</li>
<li><code class="docutils literal"><span class="pre">try_import</span></code> and <code class="docutils literal"><span class="pre">try_imports</span></code> have a callback that is called whenever
they fail to import a module.  (Martin Pool)</li>
</ul>
</div>
</div>
<div class="section" id="id90">
<h2>0.9.10<a class="headerlink" href="#id90" title="Permalink to this headline">¶</a></h2>
<p>The last release of testtools could not be easy_installed.  This is considered
severe enough for a re-release.</p>
<div class="section" id="id91">
<h3>Improvements<a class="headerlink" href="#id91" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Include <code class="docutils literal"><span class="pre">doc/</span></code> in the source distribution, making testtools installable
from PyPI again (Tres Seaver, #757439)</li>
</ul>
</div>
</div>
<div class="section" id="id92">
<h2>0.9.9<a class="headerlink" href="#id92" title="Permalink to this headline">¶</a></h2>
<p>Many, many new matchers, vastly expanded documentation, stacks of bug fixes,
better unittest2 integration.  If you&#8217;ve ever wanted to try out testtools but
been afraid to do so, this is the release to try.</p>
<div class="section" id="id93">
<h3>Changes<a class="headerlink" href="#id93" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The timestamps generated by <code class="docutils literal"><span class="pre">TestResult</span></code> objects when no timing data has
been received are now datetime-with-timezone, which allows them to be
sensibly serialised and transported. (Robert Collins, #692297)</li>
</ul>
</div>
<div class="section" id="id94">
<h3>Improvements<a class="headerlink" href="#id94" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">AnnotatedMismatch</span></code> now correctly returns details.
(Jonathan Lange, #724691)</li>
<li>distutils integration for the testtools test runner. Can now use it for
&#8216;python setup.py test&#8217;. (Christian Kampka, #693773)</li>
<li><code class="docutils literal"><span class="pre">EndsWith</span></code> and <code class="docutils literal"><span class="pre">KeysEqual</span></code> now in testtools.matchers.__all__.
(Jonathan Lange, #692158)</li>
<li><code class="docutils literal"><span class="pre">MatchesException</span></code> extended to support a regular expression check against
the str() of a raised exception.  (Jonathan Lange)</li>
<li><code class="docutils literal"><span class="pre">MultiTestResult</span></code> now forwards the <code class="docutils literal"><span class="pre">time</span></code> API. (Robert Collins, #692294)</li>
<li><code class="docutils literal"><span class="pre">MultiTestResult</span></code> now documented in the manual. (Jonathan Lange, #661116)</li>
<li>New content helpers <code class="docutils literal"><span class="pre">content_from_file</span></code>, <code class="docutils literal"><span class="pre">content_from_stream</span></code> and
<code class="docutils literal"><span class="pre">attach_file</span></code> make it easier to attach file-like objects to a
test. (Jonathan Lange, Robert Collins, #694126)</li>
<li>New <code class="docutils literal"><span class="pre">ExpectedException</span></code> context manager to help write tests against things
that are expected to raise exceptions. (Aaron Bentley)</li>
<li>New matchers:<ul>
<li><code class="docutils literal"><span class="pre">MatchesListwise</span></code> matches an iterable of matchers against an iterable
of values. (Michael Hudson-Doyle)</li>
<li><code class="docutils literal"><span class="pre">MatchesRegex</span></code> matches a string against a regular expression.
(Michael Hudson-Doyle)</li>
<li><code class="docutils literal"><span class="pre">MatchesStructure</span></code> matches attributes of an object against given
matchers.  (Michael Hudson-Doyle)</li>
<li><code class="docutils literal"><span class="pre">AfterPreproccessing</span></code> matches values against a matcher after passing them
through a callable.  (Michael Hudson-Doyle)</li>
<li><code class="docutils literal"><span class="pre">MatchesSetwise</span></code> matches an iterable of matchers against an iterable of
values, without regard to order.  (Michael Hudson-Doyle)</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">setup.py</span></code> can now build a snapshot when Bazaar is installed but the tree
is not a Bazaar tree. (Jelmer Vernooij)</li>
<li>Support for running tests using distutils (Christian Kampka, #726539)</li>
<li>Vastly improved and extended documentation. (Jonathan Lange)</li>
<li>Use unittest2 exception classes if available. (Jelmer Vernooij)</li>
</ul>
</div>
</div>
<div class="section" id="id95">
<h2>0.9.8<a class="headerlink" href="#id95" title="Permalink to this headline">¶</a></h2>
<p>In this release we bring some very interesting improvements:</p>
<ul class="simple">
<li>new matchers for exceptions, sets, lists, dicts and more.</li>
<li>experimental (works but the contract isn&#8217;t supported) twisted reactor
support.</li>
<li>The built in runner can now list tests and filter tests (the -l and
&#8211;load-list options).</li>
</ul>
<div class="section" id="id96">
<h3>Changes<a class="headerlink" href="#id96" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>addUnexpectedSuccess is translated to addFailure for test results that don&#8217;t
know about addUnexpectedSuccess.  Further, it fails the entire result for
all testtools TestResults (i.e. wasSuccessful() returns False after
addUnexpectedSuccess has been called). Note that when using a delegating
result such as ThreadsafeForwardingResult, MultiTestResult or
ExtendedToOriginalDecorator then the behaviour of addUnexpectedSuccess is
determined by the delegated to result(s).
(Jonathan Lange, Robert Collins, #654474, #683332)</li>
<li>startTestRun will reset any errors on the result.  That is, wasSuccessful()
will always return True immediately after startTestRun() is called. This
only applies to delegated test results (ThreadsafeForwardingResult,
MultiTestResult and ExtendedToOriginalDecorator) if the delegated to result
is a testtools test result - we cannot reliably reset the state of unknown
test result class instances. (Jonathan Lange, Robert Collins, #683332)</li>
<li>Responsibility for running test cleanups has been moved to <code class="docutils literal"><span class="pre">RunTest</span></code>.
This change does not affect public APIs and can be safely ignored by test
authors.  (Jonathan Lange, #662647)</li>
</ul>
</div>
<div class="section" id="id97">
<h3>Improvements<a class="headerlink" href="#id97" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New matchers:<ul>
<li><code class="docutils literal"><span class="pre">EndsWith</span></code> which complements the existing <code class="docutils literal"><span class="pre">StartsWith</span></code> matcher.
(Jonathan Lange, #669165)</li>
<li><code class="docutils literal"><span class="pre">MatchesException</span></code> matches an exception class and parameters. (Robert
Collins)</li>
<li><code class="docutils literal"><span class="pre">KeysEqual</span></code> matches a dictionary with particular keys.  (Jonathan Lange)</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">assertIsInstance</span></code> supports a custom error message to be supplied, which
is necessary when using <code class="docutils literal"><span class="pre">assertDictEqual</span></code> on Python 2.7 with a
<code class="docutils literal"><span class="pre">testtools.TestCase</span></code> base class. (Jelmer Vernooij)</li>
<li>Experimental support for running tests that return Deferreds.
(Jonathan Lange, Martin [gz])</li>
<li>Provide a per-test decorator, run_test_with, to specify which RunTest
object to use for a given test.  (Jonathan Lange, #657780)</li>
<li>Fix the runTest parameter of TestCase to actually work, rather than raising
a TypeError.  (Jonathan Lange, #657760)</li>
<li>Non-release snapshots of testtools will now work with buildout.
(Jonathan Lange, #613734)</li>
<li>Malformed SyntaxErrors no longer blow up the test suite.  (Martin [gz])</li>
<li><code class="docutils literal"><span class="pre">MismatchesAll.describe</span></code> no longer appends a trailing newline.
(Michael Hudson-Doyle, #686790)</li>
<li>New helpers for conditionally importing modules, <code class="docutils literal"><span class="pre">try_import</span></code> and
<code class="docutils literal"><span class="pre">try_imports</span></code>.  (Jonathan Lange)</li>
<li><code class="docutils literal"><span class="pre">Raises</span></code> added to the <code class="docutils literal"><span class="pre">testtools.matchers</span></code> module - matches if the
supplied callable raises, and delegates to an optional matcher for validation
of the exception. (Robert Collins)</li>
<li><code class="docutils literal"><span class="pre">raises</span></code> added to the <code class="docutils literal"><span class="pre">testtools.matchers</span></code> module - matches if the
supplied callable raises and delegates to <code class="docutils literal"><span class="pre">MatchesException</span></code> to validate
the exception. (Jonathan Lange)</li>
<li>Tests will now pass on Python 2.6.4 : an <code class="docutils literal"><span class="pre">Exception</span></code> change made only in
2.6.4 and reverted in Python 2.6.5 was causing test failures on that version.
(Martin [gz], #689858).</li>
<li><code class="docutils literal"><span class="pre">testtools.TestCase.useFixture</span></code> has been added to glue with fixtures nicely.
(Robert Collins)</li>
<li><code class="docutils literal"><span class="pre">testtools.run</span></code> now supports <code class="docutils literal"><span class="pre">-l</span></code> to list tests rather than executing
them. This is useful for integration with external test analysis/processing
tools like subunit and testrepository. (Robert Collins)</li>
<li><code class="docutils literal"><span class="pre">testtools.run</span></code> now supports <code class="docutils literal"><span class="pre">--load-list</span></code>, which takes a file containing
test ids, one per line, and intersects those ids with the tests found. This
allows fine grained control of what tests are run even when the tests cannot
be named as objects to import (e.g. due to test parameterisation via
testscenarios). (Robert Collins)</li>
<li>Update documentation to say how to use testtools.run() on Python 2.4.
(Jonathan Lange, #501174)</li>
<li><code class="docutils literal"><span class="pre">text_content</span></code> conveniently converts a Python string to a Content object.
(Jonathan Lange, James Westby)</li>
</ul>
</div>
</div>
<div class="section" id="id98">
<h2>0.9.7<a class="headerlink" href="#id98" title="Permalink to this headline">¶</a></h2>
<p>Lots of little cleanups in this release; many small improvements to make your
testing life more pleasant.</p>
<div class="section" id="id99">
<h3>Improvements<a class="headerlink" href="#id99" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Cleanups can raise <code class="docutils literal"><span class="pre">testtools.MultipleExceptions</span></code> if they have multiple
exceptions to report. For instance, a cleanup which is itself responsible for
running several different internal cleanup routines might use this.</li>
<li>Code duplication between assertEqual and the matcher Equals has been removed.</li>
<li>In normal circumstances, a TestCase will no longer share details with clones
of itself. (Andrew Bennetts, bug #637725)</li>
<li>Less exception object cycles are generated (reduces peak memory use between
garbage collection). (Martin [gz])</li>
<li>New matchers &#8216;DoesNotStartWith&#8217; and &#8216;StartsWith&#8217; contributed by Canonical
from the Launchpad project. Written by James Westby.</li>
<li>Timestamps as produced by subunit protocol clients are now forwarded in the
ThreadsafeForwardingResult so correct test durations can be reported.
(Martin [gz], Robert Collins, #625594)</li>
<li>With unittest from Python 2.7 skipped tests will now show only the reason
rather than a serialisation of all details. (Martin [gz], #625583)</li>
<li>The testtools release process is now a little better documented and a little
smoother.  (Jonathan Lange, #623483, #623487)</li>
</ul>
</div>
</div>
<div class="section" id="id100">
<h2>0.9.6<a class="headerlink" href="#id100" title="Permalink to this headline">¶</a></h2>
<p>Nothing major in this release, just enough small bits and pieces to make it
useful enough to upgrade to.</p>
<p>In particular, a serious bug in assertThat() has been fixed, it&#8217;s easier to
write Matchers, there&#8217;s a TestCase.patch() method for those inevitable monkey
patches and TestCase.assertEqual gives slightly nicer errors.</p>
<div class="section" id="id101">
<h3>Improvements<a class="headerlink" href="#id101" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>&#8216;TestCase.assertEqual&#8217; now formats errors a little more nicely, in the
style of bzrlib.</li>
<li>Added <cite>PlaceHolder</cite> and <cite>ErrorHolder</cite>, TestCase-like objects that can be
used to add results to a <cite>TestResult</cite>.</li>
<li>&#8216;Mismatch&#8217; now takes optional description and details parameters, so
custom Matchers aren&#8217;t compelled to make their own subclass.</li>
<li>jml added a built-in UTF8_TEXT ContentType to make it slightly easier to
add details to test results. See bug #520044.</li>
<li>Fix a bug in our built-in matchers where assertThat would blow up if any
of them failed. All built-in mismatch objects now provide get_details().</li>
<li>New &#8216;Is&#8217; matcher, which lets you assert that a thing is identical to
another thing.</li>
<li>New &#8216;LessThan&#8217; matcher which lets you assert that a thing is less than
another thing.</li>
<li>TestCase now has a &#8216;patch()&#8217; method to make it easier to monkey-patching
objects in tests. See the manual for more information. Fixes bug #310770.</li>
<li>MultiTestResult methods now pass back return values from the results it
forwards to.</li>
</ul>
</div>
</div>
<div class="section" id="id102">
<h2>0.9.5<a class="headerlink" href="#id102" title="Permalink to this headline">¶</a></h2>
<p>This release fixes some obscure traceback formatting issues that probably
weren&#8217;t affecting you but were certainly breaking our own test suite.</p>
<div class="section" id="id103">
<h3>Changes<a class="headerlink" href="#id103" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Jamu Kakar has updated classes in testtools.matchers and testtools.runtest
to be new-style classes, fixing bug #611273.</li>
</ul>
</div>
<div class="section" id="id104">
<h3>Improvements<a class="headerlink" href="#id104" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Martin[gz] fixed traceback handling to handle cases where extract_tb returns
a source line of None. Fixes bug #611307.</li>
<li>Martin[gz] fixed an unicode issue that was causing the tests to fail,
closing bug #604187.</li>
<li>testtools now handles string exceptions (although why would you want to use
them?) and formats their tracebacks correctly. Thanks to Martin[gz] for
fixing bug #592262.</li>
</ul>
</div>
</div>
<div class="section" id="id105">
<h2>0.9.4<a class="headerlink" href="#id105" title="Permalink to this headline">¶</a></h2>
<p>This release overhauls the traceback formatting layer to deal with Python 2
line numbers and traceback objects often being local user encoded strings
rather than unicode objects. Test discovery has also been added and Python 3.1
is also supported. Finally, the Mismatch protocol has been extended to let
Matchers collaborate with tests in supplying detailed data about failures.</p>
<div class="section" id="id106">
<h3>Changes<a class="headerlink" href="#id106" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>testtools.utils has been renamed to testtools.compat. Importing
testtools.utils will now generate a deprecation warning.</li>
</ul>
</div>
<div class="section" id="id107">
<h3>Improvements<a class="headerlink" href="#id107" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add machinery for Python 2 to create unicode tracebacks like those used by
Python 3. This means testtools no longer throws on encountering non-ascii
filenames, source lines, or exception strings when displaying test results.
Largely contributed by Martin[gz] with some tweaks from Robert Collins.</li>
<li>James Westby has supplied test discovery support using the Python 2.7
TestRunner in testtools.run. This requires the &#8216;discover&#8217; module. This
closes bug #250764.</li>
<li>Python 3.1 is now supported, thanks to Martin[gz] for a partial patch.
This fixes bug #592375.</li>
<li>TestCase.addCleanup has had its docstring corrected about when cleanups run.</li>
<li>TestCase.skip is now deprecated in favour of TestCase.skipTest, which is the
Python2.7 spelling for skip. This closes bug #560436.</li>
<li>Tests work on IronPython patch from Martin[gz] applied.</li>
<li>Thanks to a patch from James Westby testtools.matchers.Mismatch can now
supply a get_details method, which assertThat will query to provide
additional attachments. This can be used to provide additional detail
about the mismatch that doesn&#8217;t suite being included in describe(). For
instance, if the match process was complex, a log of the process could be
included, permitting debugging.</li>
<li>testtools.testresults.real._StringException will now answer __str__ if its
value is unicode by encoding with UTF8, and vice versa to answer __unicode__.
This permits subunit decoded exceptions to contain unicode and still format
correctly.</li>
</ul>
</div>
</div>
<div class="section" id="id108">
<h2>0.9.3<a class="headerlink" href="#id108" title="Permalink to this headline">¶</a></h2>
<p>More matchers, Python 2.4 support, faster test cloning by switching to copy
rather than deepcopy and better output when exceptions occur in cleanups are
the defining characteristics of this release.</p>
<div class="section" id="id109">
<h3>Improvements<a class="headerlink" href="#id109" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New matcher &#8220;Annotate&#8221; that adds a simple string message to another matcher,
much like the option &#8216;message&#8217; parameter to standard library assertFoo
methods.</li>
<li>New matchers &#8220;Not&#8221; and &#8220;MatchesAll&#8221;. &#8220;Not&#8221; will invert another matcher, and
&#8220;MatchesAll&#8221; that needs a successful match for all of its arguments.</li>
<li>On Python 2.4, where types.FunctionType cannot be deepcopied, testtools will
now monkeypatch copy._deepcopy_dispatch using the same trivial patch that
added such support to Python 2.5. The monkey patch is triggered by the
absence of FunctionType from the dispatch dict rather than a version check.
Bug #498030.</li>
<li>On windows the test &#8216;test_now_datetime_now&#8217; should now work reliably.</li>
<li>TestCase.getUniqueInteger and TestCase.getUniqueString now have docstrings.</li>
<li>TestCase.getUniqueString now takes an optional prefix parameter, so you can
now use it in circumstances that forbid strings with &#8216;.&#8217;s, and such like.</li>
<li>testtools.testcase.clone_test_with_new_id now uses copy.copy, rather than
copy.deepcopy. Tests that need a deeper copy should use the copy protocol to
control how they are copied. Bug #498869.</li>
<li>The backtrace test result output tests should now pass on windows and other
systems where os.sep is not &#8216;/&#8217;.</li>
<li>When a cleanUp or tearDown exception occurs, it is now accumulated as a new
traceback in the test details, rather than as a separate call to addError /
addException. This makes testtools work better with most TestResult objects
and fixes bug #335816.</li>
</ul>
</div>
</div>
<div class="section" id="id110">
<h2>0.9.2<a class="headerlink" href="#id110" title="Permalink to this headline">¶</a></h2>
<p>Python 3 support, more matchers and better consistency with Python 2.7 &#8211;
you&#8217;d think that would be enough for a point release. Well, we here on the
testtools project think that you deserve more.</p>
<p>We&#8217;ve added a hook so that user code can be called just-in-time whenever there
is an exception, and we&#8217;ve also factored out the &#8220;run&#8221; logic of test cases so
that new outcomes can be added without fiddling with the actual flow of logic.</p>
<p>It might sound like small potatoes, but it&#8217;s changes like these that will
bring about the end of test frameworks.</p>
<div class="section" id="id111">
<h3>Improvements<a class="headerlink" href="#id111" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A failure in setUp and tearDown now report as failures not as errors.</li>
<li>Cleanups now run after tearDown to be consistent with Python 2.7&#8217;s cleanup
feature.</li>
<li>ExtendedToOriginalDecorator now passes unrecognised attributes through
to the decorated result object, permitting other extensions to the
TestCase -&gt; TestResult protocol to work.</li>
<li>It is now possible to trigger code just-in-time after an exception causes
a test outcome such as failure or skip. See the testtools MANUAL or
<code class="docutils literal"><span class="pre">pydoc</span> <span class="pre">testtools.TestCase.addOnException</span></code>. (bug #469092)</li>
<li>New matcher Equals which performs a simple equality test.</li>
<li>New matcher MatchesAny which looks for a match of any of its arguments.</li>
<li>TestCase no longer breaks if a TestSkipped exception is raised with no
parameters.</li>
<li>TestCase.run now clones test cases before they are run and runs the clone.
This reduces memory footprint in large test runs - state accumulated on
test objects during their setup and execution gets freed when test case
has finished running unless the TestResult object keeps a reference.
NOTE: As test cloning uses deepcopy, this can potentially interfere if
a test suite has shared state (such as the testscenarios or testresources
projects use).  Use the __deepcopy__ hook to control the copying of such
objects so that the shared references stay shared.</li>
<li>Testtools now accepts contributions without copyright assignment under some
circumstances. See HACKING for details.</li>
<li>Testtools now provides a convenient way to run a test suite using the
testtools result object: python -m testtools.run testspec [testspec...].</li>
<li>Testtools now works on Python 3, thanks to Benjamin Peterson.</li>
<li>Test execution now uses a separate class, testtools.RunTest to run single
tests. This can be customised and extended in a more consistent fashion than
the previous run method idiom. See pydoc for more information.</li>
<li>The test doubles that testtools itself uses are now available as part of
the testtools API in testtols.testresult.doubles.</li>
<li>TracebackContent now sets utf8 as the charset encoding, rather than not
setting one and encoding with the default encoder.</li>
<li>With python2.7 testtools.TestSkipped will be the unittest.case.SkipTest
exception class making skips compatible with code that manually raises the
standard library exception. (bug #490109)</li>
</ul>
</div>
<div class="section" id="id112">
<h3>Changes<a class="headerlink" href="#id112" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>TestCase.getUniqueInteger is now implemented using itertools.count. Thanks
to Benjamin Peterson for the patch. (bug #490111)</li>
</ul>
</div>
</div>
<div class="section" id="id113">
<h2>0.9.1<a class="headerlink" href="#id113" title="Permalink to this headline">¶</a></h2>
<p>The new matcher API introduced in 0.9.0 had a small flaw where the matchee
would be evaluated twice to get a description of the mismatch. This could lead
to bugs if the act of matching caused side effects to occur in the matchee.
Since having such side effects isn&#8217;t desirable, we have changed the API now
before it has become widespread.</p>
<div class="section" id="id114">
<h3>Changes<a class="headerlink" href="#id114" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Matcher API changed to avoid evaluating matchee twice. Please consult
the API documentation.</li>
<li>TestCase.getUniqueString now uses the test id, not the test method name,
which works nicer with parameterised tests.</li>
</ul>
</div>
<div class="section" id="id115">
<h3>Improvements<a class="headerlink" href="#id115" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Python2.4 is now supported again.</li>
</ul>
</div>
</div>
<div class="section" id="id116">
<h2>0.9.0<a class="headerlink" href="#id116" title="Permalink to this headline">¶</a></h2>
<p>This release of testtools is perhaps the most interesting and exciting one
it&#8217;s ever had. We&#8217;ve continued in bringing together the best practices of unit
testing from across a raft of different Python projects, but we&#8217;ve also
extended our mission to incorporating unit testing concepts from other
languages and from our own research, led by Robert Collins.</p>
<p>We now support skipping and expected failures. We&#8217;ll make sure that you
up-call setUp and tearDown, avoiding unexpected testing weirdnesses. We&#8217;re
now compatible with Python 2.5, 2.6 and 2.7 unittest library.</p>
<p>All in all, if you are serious about unit testing and want to get the best
thinking from the whole Python community, you should get this release.</p>
<div class="section" id="id117">
<h3>Improvements<a class="headerlink" href="#id117" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">A new TestResult API has been added for attaching details to test outcomes.
This API is currently experimental, but is being prepared with the intent
of becoming an upstream Python API. For more details see pydoc
testtools.TestResult and the TestCase addDetail / getDetails methods.</p>
</li>
<li><p class="first">assertThat has been added to TestCase. This new assertion supports
a hamcrest-inspired matching protocol. See pydoc testtools.Matcher for
details about writing matchers, and testtools.matchers for the included
matchers. See <a class="reference external" href="http://code.google.com/p/hamcrest/">http://code.google.com/p/hamcrest/</a>.</p>
</li>
<li><p class="first">Compatible with Python 2.6 and Python 2.7</p>
</li>
<li><p class="first">Failing to upcall in setUp or tearDown will now cause a test failure.
While the base methods do nothing, failing to upcall is usually a problem
in deeper hierarchies, and checking that the root method is called is a
simple way to catch this common bug.</p>
</li>
<li><p class="first">New TestResult decorator ExtendedToOriginalDecorator which handles
downgrading extended API calls like addSkip to older result objects that
do not support them. This is used internally to make testtools simpler but
can also be used to simplify other code built on or for use with testtools.</p>
</li>
<li><p class="first">New TextTestResult supporting the extended APIs that testtools provides.</p>
</li>
<li><dl class="first docutils">
<dt>Nose will no longer find &#8216;runTest&#8217; tests in classes derived from</dt>
<dd><p class="first last">testtools.testcase.TestCase (bug #312257).</p>
</dd>
</dl>
</li>
<li><p class="first">Supports the Python 2.7/3.1 addUnexpectedSuccess and addExpectedFailure
TestResult methods, with a support function &#8216;knownFailure&#8217; to let tests
trigger these outcomes.</p>
</li>
<li><p class="first">When using the skip feature with TestResult objects that do not support it
a test success will now be reported. Previously an error was reported but
production experience has shown that this is too disruptive for projects that
are using skips: they cannot get a clean run on down-level result objects.</p>
</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">testtools NEWS</a><ul>
<li><a class="reference internal" href="#next">NEXT</a></li>
<li><a class="reference internal" href="#id1">1.8.0</a><ul>
<li><a class="reference internal" href="#improvements">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id2">1.7.1</a><ul>
<li><a class="reference internal" href="#id3">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id4">1.7.0</a><ul>
<li><a class="reference internal" href="#id5">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id6">1.6.1</a><ul>
<li><a class="reference internal" href="#changes">Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id7">1.6.0</a><ul>
<li><a class="reference internal" href="#id8">Improvements</a></li>
<li><a class="reference internal" href="#id9">Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id10">1.5.0</a><ul>
<li><a class="reference internal" href="#id11">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id12">1.4.0</a><ul>
<li><a class="reference internal" href="#id13">Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id14">1.3.0</a><ul>
<li><a class="reference internal" href="#id15">Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id16">1.2.1</a><ul>
<li><a class="reference internal" href="#id17">Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id18">1.2.0</a><ul>
<li><a class="reference internal" href="#id19">Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id20">1.1.0</a><ul>
<li><a class="reference internal" href="#id21">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id22">1.0.0</a><ul>
<li><a class="reference internal" href="#id23">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id24">0.9.39</a></li>
<li><a class="reference internal" href="#id25">0.9.38</a><ul>
<li><a class="reference internal" href="#id26">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id27">0.9.37</a><ul>
<li><a class="reference internal" href="#id28">Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id29">0.9.36</a><ul>
<li><a class="reference internal" href="#id30">Changes</a></li>
<li><a class="reference internal" href="#id31">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id32">0.9.35</a><ul>
<li><a class="reference internal" href="#id33">Changes</a></li>
<li><a class="reference internal" href="#id34">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id35">0.9.34</a><ul>
<li><a class="reference internal" href="#id36">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id37">0.9.33</a><ul>
<li><a class="reference internal" href="#id38">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id39">0.9.32</a><ul>
<li><a class="reference internal" href="#id40">Changes</a></li>
<li><a class="reference internal" href="#id41">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id42">0.9.31</a><ul>
<li><a class="reference internal" href="#id43">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id44">0.9.30</a><ul>
<li><a class="reference internal" href="#id45">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id46">0.9.29</a><ul>
<li><a class="reference internal" href="#id47">Changes</a></li>
<li><a class="reference internal" href="#id48">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id49">0.9.28</a><ul>
<li><a class="reference internal" href="#id50">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id51">0.9.27</a><ul>
<li><a class="reference internal" href="#id52">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id53">0.9.26</a><ul>
<li><a class="reference internal" href="#id54">Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id55">0.9.25</a><ul>
<li><a class="reference internal" href="#id56">Changes</a></li>
<li><a class="reference internal" href="#id57">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id58">0.9.24</a><ul>
<li><a class="reference internal" href="#id59">Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id60">0.9.23</a><ul>
<li><a class="reference internal" href="#id61">Changes</a></li>
<li><a class="reference internal" href="#id62">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id63">0.9.22</a><ul>
<li><a class="reference internal" href="#id64">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id65">0.9.21</a><ul>
<li><a class="reference internal" href="#id66">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id67">0.9.20</a><ul>
<li><a class="reference internal" href="#id68">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id69">0.9.19</a><ul>
<li><a class="reference internal" href="#id70">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id71">0.9.18</a></li>
<li><a class="reference internal" href="#id72">0.9.17</a><ul>
<li><a class="reference internal" href="#id73">Changes</a></li>
<li><a class="reference internal" href="#id74">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id75">0.9.16</a><ul>
<li><a class="reference internal" href="#id76">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id77">0.9.15</a><ul>
<li><a class="reference internal" href="#id78">Changes</a></li>
<li><a class="reference internal" href="#id79">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id80">0.9.14</a></li>
<li><a class="reference internal" href="#id81">0.9.13</a><ul>
<li><a class="reference internal" href="#id82">Changes</a></li>
<li><a class="reference internal" href="#id83">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id84">0.9.12</a><ul>
<li><a class="reference internal" href="#id85">Changes</a></li>
<li><a class="reference internal" href="#id86">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id87">0.9.11</a><ul>
<li><a class="reference internal" href="#id88">Changes</a></li>
<li><a class="reference internal" href="#id89">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id90">0.9.10</a><ul>
<li><a class="reference internal" href="#id91">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id92">0.9.9</a><ul>
<li><a class="reference internal" href="#id93">Changes</a></li>
<li><a class="reference internal" href="#id94">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id95">0.9.8</a><ul>
<li><a class="reference internal" href="#id96">Changes</a></li>
<li><a class="reference internal" href="#id97">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id98">0.9.7</a><ul>
<li><a class="reference internal" href="#id99">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id100">0.9.6</a><ul>
<li><a class="reference internal" href="#id101">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id102">0.9.5</a><ul>
<li><a class="reference internal" href="#id103">Changes</a></li>
<li><a class="reference internal" href="#id104">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id105">0.9.4</a><ul>
<li><a class="reference internal" href="#id106">Changes</a></li>
<li><a class="reference internal" href="#id107">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id108">0.9.3</a><ul>
<li><a class="reference internal" href="#id109">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id110">0.9.2</a><ul>
<li><a class="reference internal" href="#id111">Improvements</a></li>
<li><a class="reference internal" href="#id112">Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id113">0.9.1</a><ul>
<li><a class="reference internal" href="#id114">Changes</a></li>
<li><a class="reference internal" href="#id115">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id116">0.9.0</a><ul>
<li><a class="reference internal" href="#id117">Improvements</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="hacking.html"
                        title="previous chapter">Contributing to testtools</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="api.html"
                        title="next chapter">testtools API documentation</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/news.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="api.html" title="testtools API documentation"
             >next</a> |</li>
        <li class="right" >
          <a href="hacking.html" title="Contributing to testtools"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">testtools VERSION documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2010, The testtools authors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>